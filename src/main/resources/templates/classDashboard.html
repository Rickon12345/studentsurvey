<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/hierarchy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/locales/de_DE.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/germanyLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/fonts/notosans-sc.js"></script>
    <style>
        #chartdiv {
          width: 100%;
          max-width: 100%;
          height: 600px;
        }
    </style>
    <script th:inline="javascript">
        var friendsData = /*[[${friends}]]*/;
        var convertedData = {
          name: friendsData.participant.firstName + ' ' + friendsData.participant.lastName,
          value: friendsData.participantId,
          children: friendsData.list.map(item => ({
            name: item.firstName + ' ' + item.lastName,
            value: item.id
          }))
        };

            am5.ready(function() {
                var root = am5.Root.new("chartdiv");

                root.setThemes([
                  am5themes_Animated.new(root)
                ]);

                var data = convertedData;

                var container = root.container.children.push(am5.Container.new(root, {
                  width: am5.percent(100),
                  height: am5.percent(100),
                  layout: root.verticalLayout
                }));
                var series = container.children.push(am5hierarchy.ForceDirected.new(root, {
                    downDepth: 1,
                    initialDepth: 1,
                    topDepth: 0,
                    maxRadius: 40,
                    minRadius: 22,
                    valueField: "value",
                    categoryField: "name",
                    childDataField: "children",
                    idField: "name",
                    linkWithStrength: 0.3,
                    linkWithField: "linkWith",
                    manyBodyStrength: -15,
                    centerStrength: 0.5
                }));

                series.get("colors").setAll({
                  step: 2
                });

                series.links.template.set("strength", 1);
                series.data.setAll([data]);
                series.set("selectedDataItem", series.dataItems[0]);
                series.appear(1000, 100);
                });
    </script>
</head>
<body>
<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <!-- Brand/logo -->
    <a class="navbar-brand" href="#">Bright Boost</a>

    <!-- Links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" th:href="@{/students}">Students</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/teachers}">Teachers</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/courses}">Courses</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/classes}">Classes</a>
        </li>
    </ul>
    <!-- Links -->
    <form class="form-inline" method="post" th:action="@{/student/search}" th:object="${participant}">
        <input class="form-control mr-sm-2" type="text" th:field="*{id}" placeholder="Search">
        <div class="form-group">
            <label for="surveyDate">Filter By Semester:</label>
            <select class="form-control" id="surveyDate" th:field="*{surveyDate}">
                <option value="2023-01-01 00:00:00">January 2023</option>
                <option value="2023-07-01 00:00:00">July 2023</option>
            </select>
        </div>
        <button class="btn btn-success" type="submit">Search</button>
    </form>
</nav>

<div class="container-fluid">
    <div class="card col-sm-6">
        <div class="card-header">Student Information</div>
        <div class="card-body">
        <table class="table">
            <tr><td>ID</td><td th:text="${participant.id}"></td></tr>
            <tr><td>firstName</td><td th:text="${participant.firstName}"></td></tr>
            <tr><td>lastName</td><td th:text="${participant.lastName}"></td></tr>
            <tr><td>email</td><td th:text="${participant.email}"></td></tr>
            <tr><td>perc effort</td><td th:text="${participant.percEffort}"></td></tr>
            <tr><td>attendance</td><td th:text="${participant.attendance}"></td></tr>
            <tr><td>perc academic</td><td th:text="${participant.percAcademic}"></td></tr>
            <tr><td>completeYears</td><td th:text="${participant.completeYears}"></td></tr>
            <tr><td>house</td><td th:text="${participant.house}"></td></tr>
            <tr><td>survey date</td><td th:text="${participant.surveyDate}"></td></tr>
        </table>
        </div>
    </div>

<!-- HTML -->
    <div class="card col-sm-6">
        <div class="card-header">Friends</div>
        <div class="card-body" id="chartdiv"></div>
    </div>
</div>
</body>
</html>